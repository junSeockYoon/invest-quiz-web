<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CQ Level Test - 결과</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 웹에서도 모바일처럼 보이도록 설정 */
        body {
            max-width: 480px;
            margin: 0 auto;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
            position: relative;
            overflow-x: hidden;
        }
        
        /* 배경 장식 요소 */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(99, 102, 241, 0.06) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(59, 130, 246, 0.04) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
            z-index: 0;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-30px, -30px) rotate(5deg); }
        }
        
        /* 메인 컨텐츠를 배경 위에 표시 */
        .main-content {
            position: relative;
            z-index: 1;
        }
        
        /* 카드 배경 효과 */
        .card-bg {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        
        /* 등급별 색상 */
        .grade-s { color: #9333ea; }
        .grade-a { color: #2563eb; }
        .grade-b { color: #16a34a; }
        .grade-c { color: #ea580c; }
        .grade-d { color: #dc2626; }
        
        .grade-bg-s { background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%); }
        .grade-bg-a { background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); }
        .grade-bg-b { background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); }
        .grade-bg-c { background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%); }
        .grade-bg-d { background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); }
    </style>
</head>
<body class="min-h-screen">
    <!-- Main Container -->
    <div class="main-content flex flex-col min-h-screen px-6 py-8">
        
        <!-- 결과 헤더 -->
        <header class="text-center mb-8">
            <h1 class="text-3xl font-extrabold text-gray-800 mb-2">테스트 결과</h1>
            <p class="text-sm text-gray-500">당신의 투자 지능을 확인하세요</p>
        </header>

        <!-- 결과 카드 -->
        <% if (result && result.dataset && result.dataset.data) { %>
        <% const resultData = Array.isArray(result.dataset.data) ? result.dataset.data[0] : result.dataset.data; %>
        <% const totalScore = resultData.totalScore; %>
        <% const grade = resultData.grade; %>
        <% const scorePercent = Math.round((totalScore / 56) * 100); %>
        
        <div class="card-bg rounded-3xl p-8 shadow-xl border border-gray-200/50 mb-6">
            <!-- 등급 표시 -->
            <div class="text-center mb-6">
                <div class="inline-block px-6 py-4 rounded-2xl grade-bg-<%= grade.toLowerCase() %> text-white mb-4">
                    <div class="text-5xl font-bold mb-1"><%= grade %></div>
                    <div class="text-sm font-medium">등급</div>
                </div>
            </div>
            
            <!-- 점수 표시 -->
            <div class="text-center mb-6">
                <div class="text-4xl font-bold text-gray-800 mb-2">
                    <span class="grade-<%= grade.toLowerCase() %>"><%= totalScore %></span>
                    <span class="text-2xl text-gray-500">/ 56</span>
                </div>
                <div class="text-lg text-gray-600">
                    정답률 <span class="font-bold grade-<%= grade.toLowerCase() %>"><%= scorePercent %>%</span>
                </div>
            </div>
            
            <!-- 진행 바 -->
            <div class="w-full bg-gray-200 rounded-full h-4 mb-6 overflow-hidden">
                <div class="h-full grade-bg-<%= grade.toLowerCase() %> rounded-full transition-all duration-500" style="width: <%= scorePercent %>%"></div>
            </div>
            
            <!-- 테스트 정보 -->
            <div class="space-y-3 text-sm text-gray-600">
                <div class="flex justify-between items-center py-2 border-b border-gray-200">
                    <span class="font-medium">사용자</span>
                    <span class="text-gray-800"><%= resultData.userName %></span>
                </div>
                <div class="flex justify-between items-center py-2 border-b border-gray-200">
                    <span class="font-medium">테스트 날짜</span>
                    <span class="text-gray-800">
                        <%= new Date(resultData.createdAt).toLocaleDateString('ko-KR', { 
                            year: 'numeric', 
                            month: 'long', 
                            day: 'numeric' 
                        }) %>
                    </span>
                </div>
            </div>
        </div>

        <!-- 등급 설명 -->
        <div class="card-bg rounded-2xl p-6 shadow-md border border-gray-200/50 mb-6">
            <h3 class="text-lg font-bold text-gray-800 mb-4">등급 기준</h3>
            <div class="space-y-2 text-sm">
                <div class="flex justify-between items-center">
                    <span class="flex items-center gap-2">
                        <span class="w-4 h-4 rounded-full bg-purple-500"></span>
                        <span class="font-medium">S 등급</span>
                    </span>
                    <span class="text-gray-600">51-56점 (91% 이상)</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="flex items-center gap-2">
                        <span class="w-4 h-4 rounded-full bg-blue-500"></span>
                        <span class="font-medium">A 등급</span>
                    </span>
                    <span class="text-gray-600">45-50점 (80-90%)</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="flex items-center gap-2">
                        <span class="w-4 h-4 rounded-full bg-green-500"></span>
                        <span class="font-medium">B 등급</span>
                    </span>
                    <span class="text-gray-600">39-44점 (70-79%)</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="flex items-center gap-2">
                        <span class="w-4 h-4 rounded-full bg-orange-500"></span>
                        <span class="font-medium">C 등급</span>
                    </span>
                    <span class="text-gray-600">28-38점 (50-69%)</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="flex items-center gap-2">
                        <span class="w-4 h-4 rounded-full bg-red-500"></span>
                        <span class="font-medium">D 등급</span>
                    </span>
                    <span class="text-gray-600">0-27점 (49% 이하)</span>
                </div>
            </div>
        </div>

        <% } else { %>
        <div class="card-bg rounded-2xl p-8 shadow-md border border-gray-200/50 text-center">
            <p class="text-gray-600">결과를 불러올 수 없습니다.</p>
        </div>
        <% } %>

        <!-- 버튼 영역 -->
        <div class="space-y-3 mt-auto">
            <!-- 다시 테스트하기 버튼 -->
            <a href="/test" class="block">
                <button class="w-full py-4 px-6 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold text-lg rounded-xl shadow-md hover:shadow-lg transition-all duration-200">
                    다시 테스트하기
                </button>
            </a>
            
            <!-- 메인으로 가기 버튼 -->
            <a href="/" class="block">
                <button class="w-full py-4 px-6 bg-gray-200 text-gray-700 font-semibold text-lg rounded-xl shadow-md hover:shadow-lg transition-all duration-200">
                    메인으로 가기
                </button>
            </a>
        </div>

    </div>
</body>
</html>

